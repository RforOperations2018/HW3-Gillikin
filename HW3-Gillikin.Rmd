---
title: "HW3-Gillikin"
output: html_document
---

```{r setup, include=FALSE}
require(rgdal)
require(leaflet)
require(leaflet.extras)
require(dplyr)
require(readxl)
require(stringr)
require(sp)
```



```{r}
# Load affordable housing units data for Charlottesville, VA
housing.units <- read.csv("charlottesville_affordable_housing.csv")

# Load US Census tract data for VA
tract <- readOGR("./cb_2017_51_tract_500k/cb_2017_51_tract_500k.shp", layer = "cb_2017_51_tract_500k", GDAL1_integer64_policy = TRUE)

# Custom color palatte
palet <- colorFactor(c("#4575b4", "#d73027"), c("multiple", "single"))
```


```{r}
leaflet() %>%
  # Set custom view
  setView(-78.4800, 38.0255, 13) %>%
  # 3 map layers
  addTiles(group = "OpenStreetMap.Mapnik") %>%
  addProviderTiles("OpenStreetMap.HOT", group = "OpenStreetMap.HOT") %>%
  addProviderTiles("OpenTopoMap", group = "OpenTopoMap") %>%
  # Layer control
  addLayersControl(
    baseGroups = c("OpenStreetMap.Mapnik", "OpenStreetMap.HOT", "OpenTopoMap"),
    overlayGroups = c("Affordable Housing Units", "Census Tracts"),
    options = layersControlOptions(collapsed = FALSE)) %>%
  # Add clusters of markers for affordable housing units
  addCircleMarkers(data = housing.units, lng = ~long, lat = ~lat, radius = 2, color = ~pal(type), clusterOptions = markerClusterOptions(), group = "Affordable Housing Units") %>%
  # Add legend for circle markers
  addLegend(position = "topright" , pal = palet, values = housing.units$type, title = "Affordable Housing by Type") %>%
  # Add census tracts
  addPolygons(data = tract, fill = F, weight = 3, color = "#444444", group = "Census Tracts")

```



```{r}
```


